import subprocess
from typing import Dict, List


class AURChecker:
    def __init__(self):
        self.aur_base_url = "https://aur.archlinux.org/rpc/"
        self.installed_packages: List[Dict] = []

    def get_installed_packages(self) -> None:
        """Get list of all installed packages"""
        try:
            result = subprocess.run(
                ["pacman", "-Q"], capture_output=True, text=True, check=True
            )
            for line in result.stdout.strip().split("\n"):
                if line:
                    name, version = line.split()
                    self.installed_packages.append(
                        {"name": name, "installed_version": version}
                    )
        # add error handling
        except:
            pass

    def get_num_installed_packages(self):
        return len(self.installed_packages)


def main() -> None:
    checker = AURChecker()
    checker.get_installed_packages()
    for i in checker.installed_packages:
        print(i)

    print(checker.get_num_installed_packages)


if __name__ == "__main__":
    main()
